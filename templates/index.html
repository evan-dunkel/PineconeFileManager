{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="upload-zone">
            <i data-feather="upload-cloud" class="mb-3" style="width: 48px; height: 48px;"></i>
            <h4>Drag and drop files here</h4>
            <p>or</p>
            <input type="file" id="file-input" class="d-none">
            <button class="btn btn-primary" onclick="document.getElementById('file-input').click()">
                Browse Files
            </button>
            <div class="progress mt-3">
                <div class="progress-bar" role="progressbar" style="width: 0%"></div>
            </div>
        </div>
    </div>
</div>

<div class="row file-list">
    <div class="col-md-12">
        <h3>Uploaded Files</h3>
        {% if files %}
            {% for file in files %}
                <div class="file-item">
                    <div class="file-info">
                        <i data-feather="file" class="me-2"></i>
                        <span>{{ file.filename }}</span>
                        <small class="text-muted ms-2">
                            {{ file.uploaded_at.strftime('%Y-%m-%d %H:%M:%S') }}
                        </small>
                    </div>
                    <div class="file-actions">
                        <button class="btn btn-sm btn-outline-primary rename-btn"
                                data-file-id="{{ file.id }}"
                                data-file-name="{{ file.filename }}">
                            <i data-feather="edit-2"></i>
                        </button>
                        <form action="{{ url_for('delete_file', file_id=file.id) }}" 
                              method="POST" 
                              class="d-inline">
                            <button type="submit" class="btn btn-sm btn-outline-danger"
                                    onclick="return confirm('Are you sure you want to delete this file?')">
                                <i data-feather="trash-2"></i>
                            </button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="text-muted">No files uploaded yet.</p>
        {% endif %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        feather.replace();
    });
</script>
{% endblock %}
